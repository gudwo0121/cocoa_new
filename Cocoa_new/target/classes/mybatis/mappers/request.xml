<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.request">
	<resultMap id="requestPost" type="requestVO">
		<result property="reqNO" column="reqNO" />
		<result property="req" column="req" />
		<result property="res" column="res" />
		<result property="rTitle" column="rTitle" />
		<result property="rContents" column="rContents" />
		<result property="rDate" column="rDate" />
		<result property="rImg" column="rImg" />
		<result property="status" column="status" />
		<result property="realPrice" column="realPrice" />
		<result property="contact" column="contact" />
		<result property="notice" column="notice" />
	</resultMap>

	<!-- 요청 작성 -->
	<insert id="insertRequest" parameterType="java.util.Map">
		<![CDATA[
			INSERT INTO requestTBL
			(reqNO, req, res, rTitle, rContents, rImg, status)
			VALUES
			(#{reqNO}, #{req}, #{res}, #{rTitle}, #{rContents}, #{rImg}, "status1") 
		]]>
	</insert>

	<!-- 요청 넘버링 -->
	<select id="requestNumbering" resultType="int">
		<![CDATA[
			SELECT ifnull(max(reqNO), 0) + 1
			FROM requestTBL
		]]>
	</select>

</mapper>